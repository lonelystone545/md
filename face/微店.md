# 一面
主要是业务问题。

1. jdk8相比jdk7的JVM有哪些优化？ gc
2. ygc偶尔有突刺，1s多？ 新生代数据突然变多；
3. 某个接口，突然某一时刻响应时间变大，排查问题的思路？
    观察这台机器当时的负载load、内存、cpu、网络io的情况；检查当时是否有其他任务在执行，如定时任务；缓存是否过期，请求到数据库上了；云磁盘是否抖动这些；最后只能查这个时刻的方法调用时间，结合日志分析方法的耗时情况；
4. 分库分表，订单表有买家id和卖家id
    [分库分表：订单中心，多key业务如何进行数据库切分](https://blog.csdn.net/fly910905/article/details/87285709)
    如果根据买家id分库分表，那么如何根据卖家id查询订单呢？
    1. 对于买家可以走分库分表，卖家可以用搜索引擎处理，搜索引擎方便排序等，虽然有延迟，但是可以接受；
    2. 一个按照买家id进行分库分表，另外一个按照卖家id进行分库分表，这样多维度查询的时候，各查各的，但是每次多一个维度查询的时候，都需要引入一个集群，集群之间的数据如何保证一致性，冗余也会占用大量的磁盘空间。可以根据binlog进行同步数据到其他集群中；
    3. 卖家进行适当的冗余如订单号，然后根据卖家id进行分库分表；
    
    
    ## 100亿的数据，取最大的100个数
    
    ## 优雅关闭，如何不依赖ndp来做？不依赖应用代码？意外宕机？
    1. 可以采用java agent，在应用启动的时候，修改应用的字节码文件，达到优雅关闭目的；
    2. 或者 每个中间件肯定有对外暴露的端口号，可以通过这些端口拿到对应的进程，然后做优雅关闭；
    3. 依赖ndp无法解决意外宕机问题；可以利用java的关闭钩子来做；或者部分应用异常仍然能够发出信号，调用底层的一些api来完成。


# 二面
业务架构问题
1. 系统架构
2. 业务架构
3. 分布式事务
4. 做了哪些改造或者难点
5. 如果让你设计一个金融系统，你会怎么设计？
    1. 首先要清楚这个金融系统包含哪些功能，如支付、交易、放款和还款等，然后根据这些业务划分不同的领域，如用户域、交易域、活动域、信贷层、资金等，不同领域可以作为不同的系统进行部署，但是前期没有必要拆分出那么多系统出来，只会增加业务复杂性，可以大的方面分成几个系统，然后每个系统里拆成多个领域，方便后面进行系统的拆分即可。如现在的交易、账单、还款在一个系统中；
    2. 技术选型问题，MQ、redis、dubbo，分布式事务的问题，以及数据库，前期可以做成单库单表，后期数据量大了，可以进行分库分表，不建议前期就拆分，只会增加业务复杂性，而且数据量也不一定有预想的那么大。
